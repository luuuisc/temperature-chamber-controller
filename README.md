# Pr√°ctica 1: Introducci√≥n a los sensores y acondicionamiento de se√±al

##  üéØ Objetivo  
El alumno comprender√° las caracter√≠sticas el√©ctricas y de operaci√≥n del sensor de temperatura, as√≠ como su aplicaci√≥n en un **sistema de control ON/OFF de temperatura**. 

---

## üìù Descripci√≥n  
Se dise√±ar√° un sistema para mantener la temperatura del aire **constante dentro de un peque√±o contenedor**.  
- Para **incrementar** la temperatura se usar√° un **foco incandescente de 12 V (3‚Äì5 W)**.  
- Para **disminuir** la temperatura se usar√° un **ventilador de 12 V DC**.  
- El control ser√° **ON/OFF con hist√©resis**, y la temperatura deseada se ingresar√° mediante una **interfaz web (Web Serial API)**.  

El sistema debe mantener la temperatura entre **30 y 50 ¬∞C** con un **error m√°ximo de ¬±2 ¬∞C**.  

---

## üìÇ Estructura  del repositorio  

```
temperature-chamber-controller/
‚îÇ
‚îú‚îÄ‚îÄ firmware/          # C√≥digo Arduino (.ino)
‚îú‚îÄ‚îÄ web/               # Archivos de interfaz (HTML, CSS, JS)
‚îú‚îÄ‚îÄ images/            # Pinout
‚îú‚îÄ‚îÄ images_result/     # Im√°genes de prueba
‚îî‚îÄ‚îÄ README.md          # Documentaci√≥n principal
‚îî‚îÄ‚îÄ LICENSE          
```

---

## ‚öôÔ∏è Requerimientos elegidos  
- **Sensor de temperatura:** LM35.  
- **Microcontrolador:** Arduino Uno R3.  
- **Etapa de potencia:** MOSFET N logic-level (para foco y ventilador).  
- **Interfaz de usuario:** P√°gina web (HTML/CSS/JS) comunicada por Web Serial.  
- **Alimentaci√≥n:** Fuente 12 V DC (‚â•2 A).  
- **Cables y salidas:** deben estar identificados en tres grupos:  
  1. Alimentaci√≥n (12 V+/GND)  
  2. Control (D3 HEAT, D5 FAN, GND)  
  3. Sensor (5 V, Se√±al A0, GND)  

---

## üß± Componentes

### Arduino Uno R3
**Especificaciones clave**
- ADC 10 bits, referencia interna ~1.1 V.  
- Pines digitales a 5 V (40 mA m√°x. absoluto por pin; usa MOSFET para potencia).  
- UART por USB (115200 baudios).  

**Tarea**:  
Lee el LM35, ejecuta el control ON/OFF con hist√©resis, conmuta los MOSFET (calor/ventilaci√≥n) y se comunica con la web (Web Serial).

**Conexiones**
- **A0** ‚ü∂ salida del LM35 (se√±al).  
- **5V** ‚ü∂ V+ del LM35.  
- **GND** ‚ü∂ GND del LM35 y GND com√∫n con la fuente de 12 V.  
- **D3** ‚ü∂ Gate MOSFET del foco (v√≠a 220 Œ©).  
- **D5** ‚ü∂ Gate MOSFET del ventilador (v√≠a 220 Œ©).  
- **USB** ‚ü∂ PC (alimentaci√≥n/l√≥gica y Web Serial).  

---

### Sensor de temperatura **LM35**
**Especificaciones clave**
- Salida **10 mV/¬∞C** (lineal).  
- Alimentaci√≥n 4‚Äì30 V (usaremos 5 V).  
- Precisi√≥n t√≠pica ¬±0.5 - 1.0 ¬∞C (cumple el ¬±2 ¬∞C de la pr√°ctica con calibraci√≥n).  

**Tarea**:  
Medir la temperatura del aire dentro del contenedor.

**Conexiones**
- **PIN1 (Vs)** ‚ü∂ 5V de Arduino.  
- **PIN2 (Vout)** ‚ü∂ A0 de Arduino.  
- **PIN3 (GND)** ‚ü∂ GND de Arduino.  
- **Capacitor**: 100 nF entre Vs y GND, junto al LM35.  

> [!IMPORTANT]
> **Ubicaci√≥n**: en flujo de aire, lejos de la radiaci√≥n directa del foco.

---

### MOSFET N logic-level (x2)
*(uno para foco ‚ÄúHEAT‚Äù y otro para ventilador ‚ÄúFAN‚Äù)*

**Modelos sugeridos**: IRLZ44N, FQP30N06L, IRLZ34N

**Especificaciones m√≠nimas**
- **V_DS ‚â• 30 V**  
- **I_D continuo ‚â• 3 A**  
- **R_DS(on) ‚â§ 30 mŒ© @ V_GS = 4.5‚Äì5 V**  

**Tarea**:  
Conmutar las cargas de 12 V por el lado bajo (low-side).

**Conexiones (por cada MOSFET)**
- **D (Drain)** ‚ü∂ regresa desde la carga (foco/ventilador).  
- **S (Source)** ‚ü∂ GND com√∫n (Arduino + 12 V).  
- **G (Gate)** ‚ü∂ pin Arduino (D3 heat / D5 fan) v√≠a 220 Œ©; con pull-down 100 kŒ© Gate‚ÜíGND.  

**Notas**
- No requieren disipador a estas corrientes (‚âà0.5 A m√°x).  
- Mantener cables cortos en potencia y **GND com√∫n**.

> [!NOTE]
> ### ¬øQu√© significa que un MOSFET sea logic-level?

Que est√° dise√±ado para conducir completamente (bajo RDS(on)) con una tensi√≥n de compuerta (VGS) propia de la l√≥gica de un microcontrolador, t√≠picamente 5 V (y a veces 3.3 V).

Un MOSFET no logic-level normalmente necesita ‚âà10 V en la compuerta para encender ‚Äúde verdad‚Äù.

### Por qu√© importa aqu√≠

El Arduino entrega 5 V en el pin digital. Si el MOSFET no es logic-level:
- No saturar√° bien a 5 V ‚Üí RDS(on) alto ‚Üí ca√≠da de voltaje y calentamiento.
- Puede que la carga ni siquiera encienda correctamente.

### Atenci√≥n en la hoja de datos

- RDS(on) especificado a VGS = 4.5‚Äì5 V (o 2.5 V si quieres compatibilidad 3.3 V).
    - Ej.: ‚ÄúRDS(on) = 25 mŒ© @ VGS = 4.5 V‚Äù.

- NO te gu√≠es por VGS(th) (umbral): es la tensi√≥n donde apenas pasan ~250 ¬µA; no indica ‚Äúencendido total‚Äù.

---

### Resistencias de Gate y Pull-down
**Especificaciones**
- Gate: **220 Œ©** (entre pin de Arduino y Gate).  
- Pull-down: **100 kŒ©** (Gate‚ÜíGND).  

**Tarea**:  
Limitar pico de corriente de compuerta y evitar encendidos falsos al energizar.

---

### Diodo de protecci√≥n para el ventilador (x1)
**Modelo sugerido**: 1N4007 (1 A, 1000 V, rectificador est√°ndar).  

**Tarea**:  
Funciona como diodo de flyback, absorbiendo el pico de voltaje generado por la carga inductiva del ventilador al apagarse, protegiendo al MOSFET y al Arduino.  

**Conexi√≥n**:  
En paralelo al ventilador: **c√°todo a +12 V**, **√°nodo al nodo entre ventilador y Drain**.  

*(El foco es resistivo: no necesita diodo).*

**¬øQu√© es un diodo flyback?**

Tambi√©n llamado diodo de rueda libre o freewheel diode, es un diodo que se coloca en paralelo a una carga inductiva (motor, rel√©, solenoide) para darle camino a la corriente cuando el interruptor (el MOSFET) se apaga. As√≠ absorbe el pico de voltaje que genera la inductancia y protege el transistor y al resto del circuito.

---

### Capacitores de desacoplo en 12 V
**Especificaciones**
- 100 ¬µF / 25 V (electrol√≠tico) cerca de las cargas.  
- 100 nF (cer√°mico) en paralelo.  

**Tarea**:  
Estabilizar el bus de 12 V y reducir EMI conmutada.

**¬øQu√© tarea realizan?**

- C2 = 100 ¬µF (electrol√≠tico, ‚Äúbulk‚Äù)

**Funci√≥n:** es un reservorio de energ√≠a. Cuando el ventilador arranca o el MOSFET conmuta, hay picos de corriente que pueden bajar el voltaje de 12 V moment√°neamente.
El capacitor entrega corriente por unos milisegundos y recorta el hundimiento (sag) de la tensi√≥n.

**Frecuencia de trabajo:** eficaz en baja a media frecuencia (decenas de Hz a algunos kHz).

**Efecto pr√°ctico:** reduce parpadeos, resets raros y variaciones que podr√≠an colarse al Arduino/sensor.

- C3 = 100 nF (cer√°mico, ‚ÄúHF‚Äù)

**Funci√≥n:** es un atajo de baja impedancia para pulsos muy r√°pidos (alto dV/dt y dI/dt) generados por el conmutado del MOSFET y el motor.
‚ÄúCorta‚Äù el ruido de alta frecuencia (EMI) y lo manda a tierra antes de que se propague por cables.

**Frecuencia de trabajo:** eficaz en alta frecuencia (de cientos de kHz a MHz).

**Efecto pr√°ctico:** la fuente y los cables ‚Äúven‚Äù menos ruido; el LM35 y el Arduino quedan m√°s limpios.

> Juntos forman un filtro en paralelo: el capacitor de 100 ¬µF se encarga de lo lento/grande y el de 100 nF de lo r√°pido/peque√±o.
(Los electrol√≠ticos tienen ESR/ESL mayores; por eso se acompa√±a con cer√°mico cercano).
> **ESR** ‚Äî Equivalent Series Resistance / **ESL** ‚Äî Equivalent Series Inductance

---

### Cargas
- **Foco 12 V, 3‚Äì5 W**  
  - Corriente: 0.25‚Äì0.42 A. **Resistivo**.  

- **Ventilador 12 V DC**  
  - Corriente: 0.1‚Äì0.3 A t√≠pico (pico de arranque mayor). **Inductivo** (lleva diodo).  

- **Conexi√≥n (ambas cargas, por separado)**
    - +12 V ‚ü∂ Carga ‚ü∂ Drain MOSFET ‚ü∂ Source MOSFET ‚ü∂ GND

---

### Fuente 12 V DC (‚â• 2 A)
**Tarea**:  
Alimentar foco y ventilador con holgura.

**Conexi√≥n**
- **+12 V** a los extremos positivos de las cargas.  
- **GND 12 V** unido al GND del Arduino (**GND com√∫n indispensable**).

---

### Cableado y accesorios
- **Cables**: AWG-22 (o AWG-20) en potencia; jumpers para se√±al.  
- **Identificaci√≥n**: 3 mazos rotulados como pide la pr√°ctica:  
  1. Alimentaci√≥n (12 V+/GND)  
  2. Control (D3 HEAT, D5 FAN, GND)  
  3. Sensor (5 V, Se√±al A0, GND)  
- **Fijaci√≥n**: porta-foco, rejilla del ventilador, prensaestopas para salidas de cables.  

---

## Conexiones ‚Äî Resumen por pines

### Pinout Arduino 
![Pinout Arduino](images/arduino.png)

### Arduino
| Pin Arduino | Conecta a | Nota |
|-------------|-----------|------|
| **5V** | Vs LM35 | Alimenta el sensor |
| **GND** | GND LM35 / GND MOSFETs / GND 12 V | Masa com√∫n |
| **A0** | Vout LM35 | Se√±al anal√≥gica |
| **D3** | Gate MOSFET HEAT (v√≠a 220 Œ©) | Control del foco |
| **D5** | Gate MOSFET FAN (v√≠a 220 Œ©) | Control del ventilador |
| **USB** | PC | Web Serial (UI) y/o alimentaci√≥n |

Pull-downs: 100 kŒ© Gate‚ÜíGND (en D3 y D5).

---

### Pinout LM35
![Pinout LM35](images/lm35.png)


### LM35
| Pin LM35 | Conecta a |
|----------|-----------|
| 1 (Vs) | 5 V Arduino |
| 2 (Vout) | A0 Arduino |
| 3 (GND) | GND Arduino |
| + 100 nF | entre Vs y GND (cerca del LM35) |

---

### Pinout MOSFET IRFZ44N
![Pinout IRFZ44N](images/irfz44n.gif)

### MOSFET HEAT (foco)
| Pin MOSFET | Conecta a |
|------------|-----------|
| **D** | Salida del foco (el otro lado del foco va a +12 V) |
| **S** | GND |
| **G** | D3 (v√≠a 220 Œ©) + 100 kŒ© a GND |

*(sin diodo)*

---

### MOSFET FAN (ventilador)
| Pin MOSFET | Conecta a |
|------------|-----------|
| **D** | Salida del ventilador (el otro lado del ventilador va a +12 V) |
| **S** | GND |
| **G** | D5 (v√≠a 220 Œ©) + 100 kŒ© a GND |
| **Diodo 1N4007** | C√°todo a +12 V / √Ånodo al nodo Ventilador-D |

---

### Fuente 12 V
| Terminal | Conecta a |
|----------|-----------|
| **+12 V** | Lado positivo de foco y ventilador |
| **GND** | GND com√∫n (conectar a GND Arduino y Sources de MOSFET) |

---

## Esquem√°tico ASCII

```
                           +12V DC (‚â•2A)
                              ‚îÇ
                              ‚îÇ
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ                   ‚îÇ
                 [FOCO]              [VENTILADOR]
               (12V 3‚Äì5W)              (12V DC)
                    ‚îÇ                   ‚îÇ
                    ‚îÇ                   ‚îÇ
                    ‚îÇ                   ‚îÇ
                    ‚îÇ               ‚îå‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ               ‚îÇ  D1   ‚îÇ  Diodo flyback 1N4007
                    ‚îÇ               ‚îÇ1N4007 ‚îÇ  (protege MOSFET del motor)
                    ‚îÇ               ‚îî‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îò
                    ‚îÇ                   ‚îÇ
                    ‚îÇ                   ‚îÇ
                    ‚ñº                   ‚ñº
                 (Nodo H)            (Nodo F)
                    ‚îÇ                   ‚îÇ
                 Drain QH           Drain QF
              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
              ‚îÇ  IRLZ44N ‚îÇ       ‚îÇ  IRLZ44N ‚îÇ     QH = MOSFET HEAT (foco)
              ‚îÇ   (QH)   ‚îÇ       ‚îÇ   (QF)   ‚îÇ     QF = MOSFET FAN  (ventilador)
              ‚îî‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îò       ‚îî‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îò
                ‚îÇ      ‚îÇ            ‚îÇ      ‚îÇ
              Source  Gate        Source  Gate
                ‚îÇ      ‚îÇ            ‚îÇ      ‚îÇ
                ‚îÇ     [R_GH]220Œ©    ‚îÇ     [R_GF]220Œ©     Resistencias de GATE
                ‚îÇ      ‚îÇ            ‚îÇ      ‚îÇ
                ‚îÇ      ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ D3    ‚îÇ      ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ D5      D3/D5 = pines Arduino
                ‚îÇ      ‚îÇ            ‚îÇ      ‚îÇ
                ‚îÇ     [R_PDH]100kŒ©  ‚îÇ     [R_PDF]100kŒ©   Pull-down Gate‚ÜíGND
                ‚îÇ      ‚îÇ            ‚îÇ      ‚îÇ
                ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
                ‚îÇ                          ‚îÇ
               GND ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ GND Arduino / GND 12V (COM√öN)

Arduino UNO R3
 ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
 ‚îÇ                              ‚îÇ
 ‚îÇ  A0 ‚óÑ‚îÄ‚îÄ‚îÄ LM35 OUT            ‚îÇ
 ‚îÇ  5V ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ LM35 Vs            ‚îÇ
 ‚îÇ  GND ‚îÄ‚îÄ‚îÄ‚ñ∫ LM35 GND           ‚îÇ
 ‚îÇ                              ‚îÇ
 ‚îÇ  D3 ‚îÄ‚îÄ‚îÄ‚ñ∫ Gate MOSFET HEAT    ‚îÇ
 ‚îÇ  D5 ‚îÄ‚îÄ‚îÄ‚ñ∫ Gate MOSFET FAN     ‚îÇ
 ‚îÇ                              ‚îÇ
 ‚îÇ  USB ‚îÄ‚îÄ‚ñ∫ PC (Web Serial)     ‚îÇ
 ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Notas:
- Resistencias 220 Œ© entre D3/D5 y Gate de cada MOSFET.
- Pull-down 100 kŒ© Gate ‚Üí GND en cada MOSFET.
*- Condensador 100 nF en LM35 (Vs-GND).
*- Condensadores 100 ¬µF + 100 nF en l√≠nea de 12 V.
- Diodo flyback: 1N4007 en el ventilador (c√°todo a +12 V, √°nodo al nodo Ventilador/Drain).
```

## üíª Software  

### Arduino (firmware)  
- Lenguaje: **C++ (Arduino IDE)**.  
- Comunicaci√≥n: **115200 baudios v√≠a Serial USB**.  
- Funciones principales:  
  - Lectura del **LM35** (A0).  
  - C√°lculo de la **temperatura en ¬∞C**.  
  - Control **ON/OFF con hist√©resis**.  
  - Conmutaci√≥n de **D3 (foco/HEAT)** y **D5 (ventilador/FAN)**.  
  - Comunicaci√≥n con la p√°gina web para mostrar/recibir datos.  

### P√°gina Web (interfaz UI)  
- Archivos:  
  - `index.html` ‚Üí estructura de la interfaz.  
  - `styles.css` ‚Üí dise√±o visual.  
  - `app.js` ‚Üí l√≥gica de comunicaci√≥n (Web Serial API).  
- Funciones principales:  
  - Permitir ingresar la **temperatura deseada**.  
  - Mostrar la **temperatura real** medida por el sensor.  
  - Mostrar en pantalla la **acci√≥n actual**: Calentando üî• / Enfriando ‚ùÑÔ∏è.  

---

## ‚ö†Ô∏è Notas de seguridad  
- **Nunca conectar cargas de 127 V AC directo al MOSFET.** Este dise√±o est√° hecho para **12 V DC**.  
- Verificar que el **GND de la fuente de 12 V est√© com√∫n** con el **GND del Arduino**.  
- Usar **diodo flyback (1N4007)** en paralelo con el ventilador para evitar da√±os por picos de voltaje.  
- Mantener buena ventilaci√≥n y fijaci√≥n de los componentes dentro del contenedor.  

---

## üöÄ Posibles mejoras  
- Reemplazar control ON/OFF por **control PID** para mayor estabilidad.  
- Agregar un **LCD 16x2 I2C** como interfaz alternativa.  
- Uso de un **m√≥dulo WiFi (ESP8266/ESP32)** para controlar y monitorear desde el celular.  
- Implementar **gr√°ficas en la web** con historial de temperatura.  

---

## Cr√©ditos 

Created with ‚ù§Ô∏è by [@luuuisc](https://github.com/luuuisc)